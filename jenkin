pipeline {
  agent any 
  stages {
     stage('Build') {
       steps { 
          sh 'docker build -t nilotpalgure1998/dvga:latest .'
       }
     }
     
     stage('Scan') {
     	steps {
	    sh 'trivy --severity HIGH,CRITICAL --no-progress image --format table -o trivy-scan-report.txt nilotpalgure1998/dvga:latest'
        }
     }
  }
}
